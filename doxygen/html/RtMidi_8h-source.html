<HTML>
<HEAD>
<TITLE>The Synthesis ToolKit in C++ (STK)</TITLE>
<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<CENTER>
<img src="princeton.gif"> &nbsp; <img src="ccrma.gif"><P>
<a class="qindex" href="index.html">Home</a> &nbsp; <a class="qindex" href="information.html">Information</a> &nbsp; <a class="qindex" href="classes.html">Classes</a> &nbsp; <a class="qindex" href="download.html">Download</a> &nbsp; <a class="qindex" href="usage.html">Usage</a> &nbsp; <a class="qindex" href="maillist.html">Mail List</a> &nbsp; <a class="qindex" href="system.html">Requirements</a> &nbsp; <a class="qindex" href="links.html">Links</a> &nbsp; <a class="qindex" href="tutorial.html">Tutorial</a></CENTER>
<HR>
<!-- Generated by Doxygen 1.3-rc3 -->
<h1>RtMidi.h</h1><div class="fragment"><pre>00001 <span class="comment">/**********************************************************************/</span>
00010 <span class="comment">/**********************************************************************/</span>
00011 
00012 <span class="preprocessor">#ifndef RTMIDI_H</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define RTMIDI_H</span>
00014 <span class="preprocessor"></span>
00015 <span class="preprocessor">#include "RtError.h"</span>
00016 <span class="preprocessor">#include &lt;string&gt;</span>
00017 
<a name="l00018"></a><a class="code" href="classRtMidi.html">00018</a> <span class="keyword">class </span><a class="code" href="classRtMidi.html">RtMidi</a>
00019 {
00020  <span class="keyword">protected</span>:
00021 
00022   <a class="code" href="classRtMidi.html">RtMidi</a>();
00023 
00024   <span class="comment">// A basic error reporting function for internal use in the RtMidi</span>
00025   <span class="comment">// subclasses.  The behavior of this function can be modified to</span>
00026   <span class="comment">// suit specific needs.</span>
00027   <span class="keywordtype">void</span> error( RtError::Type type );
00028 
00029   <span class="keywordtype">void</span> *apiData_;
00030   <span class="keywordtype">bool</span> connected_;
00031   std::string errorString_;
00032 };
00033 
00034 <span class="comment">/**********************************************************************/</span>
00048 <span class="comment">/**********************************************************************/</span>
00049 
00050 <span class="preprocessor">#include &lt;vector&gt;</span>
00051 <span class="preprocessor">#include &lt;queue&gt;</span>
00052 
<a name="l00053"></a><a class="code" href="classRtMidiIn.html">00053</a> <span class="keyword">class </span><a class="code" href="classRtMidiIn.html">RtMidiIn</a> : <span class="keyword">public</span> <a class="code" href="classRtMidi.html">RtMidi</a>
00054 {
00055  <span class="keyword">public</span>:
00056 
<a name="l00058"></a><a class="code" href="classRtMidiIn.html#s0">00058</a>   <span class="keyword">typedef</span> void (*RtMidiCallback)( <span class="keywordtype">double</span> timeStamp, std::vector&lt;unsigned char&gt; *message, <span class="keywordtype">void</span> *userData);
00059 
00061   <a class="code" href="classRtMidiIn.html#a0">RtMidiIn</a>();
00062 
00064 
00070   <a class="code" href="classRtMidiIn.html#a0">RtMidiIn</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber, RtMidiCallback callback = 0, <span class="keywordtype">void</span> *userData = 0  );
00071 
00073   <a class="code" href="classRtMidiIn.html#a2">~RtMidiIn</a>();
00074 
00076 
00084   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a3">openPort</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0, RtMidiCallback callback = 0, <span class="keywordtype">void</span> *userData = 0 );
00085 
00087   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a4">closePort</a>( <span class="keywordtype">void</span> );
00088 
00090   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classRtMidiIn.html#a5">getPortCount</a>();
00091 
00093   std::string <a class="code" href="classRtMidiIn.html#a6">getPortName</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 );
00094 
00096 
00100   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a7">setQueueSizeLimit</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> queueSize );
00101 
00103 
00110   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a8">ignoreTypes</a>( <span class="keywordtype">bool</span> midiSysex = <span class="keyword">true</span>, <span class="keywordtype">bool</span> midiTime = <span class="keyword">true</span>, <span class="keywordtype">bool</span> midiSense = <span class="keyword">true</span> );
00111 
00113 
00120   <span class="keywordtype">double</span> <a class="code" href="classRtMidiIn.html#a9">getMessage</a>( std::vector&lt;unsigned char&gt; *message );
00121 
00122   <span class="comment">// A MIDI structure used internally by the class to store incoming</span>
00123   <span class="comment">// messages.  Each message represents one and only one MIDI message.</span>
00124   <span class="keyword">struct </span>MidiMessage { 
00125     std::vector&lt;unsigned char&gt; bytes; 
00126     <span class="keywordtype">double</span> timeStamp;
00127 
00128     <span class="comment">// Default constructor.</span>
00129     MidiMessage()
00130       :bytes(3), timeStamp(0.0) {}
00131   };
00132 
00133   <span class="comment">// The RtMidiInData structure is used to pass private class data to</span>
00134   <span class="comment">// the MIDI input handling function or thread.</span>
00135   <span class="keyword">struct </span>RtMidiInData {
00136     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> lastTime;
00137     std::queue&lt;MidiMessage&gt; queue;
00138     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> queueLimit;
00139     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ignoreFlags;
00140     <span class="keywordtype">bool</span> usingCallback;
00141     <span class="keywordtype">void</span> *userCallback;
00142     <span class="keywordtype">void</span> *userData;
00143 
00144     <span class="comment">// Default constructor.</span>
00145     RtMidiInData()
00146       : lastTime(0), queueLimit(1024), ignoreFlags(7),
00147          usingCallback(false), userCallback(0), userData(0) {}
00148   };
00149 
00150  <span class="keyword">private</span>:
00151 
00152   RtMidiInData inputData_;
00153 
00154 };
00155 
00156 <span class="comment">/**********************************************************************/</span>
00168 <span class="comment">/**********************************************************************/</span>
00169 
<a name="l00170"></a><a class="code" href="classRtMidiOut.html">00170</a> <span class="keyword">class </span><a class="code" href="classRtMidiOut.html">RtMidiOut</a> : <span class="keyword">public</span> <a class="code" href="classRtMidi.html">RtMidi</a>
00171 {
00172  <span class="keyword">public</span>:
00173 
00175   <a class="code" href="classRtMidiOut.html#a0">RtMidiOut</a>();
00176 
00178 
00182   <a class="code" href="classRtMidiOut.html#a0">RtMidiOut</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber );
00183 
00185   <a class="code" href="classRtMidiOut.html#a2">~RtMidiOut</a>();
00186 
00188 
00194   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a3">openPort</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 );
00195 
00197   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a4">closePort</a>();
00198 
00200   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classRtMidiOut.html#a5">getPortCount</a>();
00201 
00203   std::string <a class="code" href="classRtMidiOut.html#a6">getPortName</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber );
00204 
00206 
00210   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a7">sendMessage</a>( std::vector&lt;unsigned char&gt; *message );
00211 
00212 };
00213 
00214 <span class="preprocessor">#endif</span>
</pre></div><HR>

<table>
  <tr><td><A HREF="http://www-ccrma.stanford.edu/software/stk/"><I>The Synthesis ToolKit in C++ (STK)</I></A></td></tr>
  <tr><td>&copy;1995-2002 Perry R. Cook and Gary P. Scavone. All Rights Reserved.</td></tr>
</table>

</BODY>
</HTML>
